{% extends "base.html" %}

{% block title %}
Home â€¢ DevOps Notes Manager
{% endblock %}

{% block body_class %}
home-page
{% endblock %}

<!-- ================= NAVBAR SEARCH ================= -->
{% block navbar_search %}
<div class="navbar-search">
  <div class="search-input-wrapper">
    <input
      type="text"
      id="searchInput"
      placeholder="ğŸ” Search commands, descriptions, or tags..."
      class="search-bar"
    />
    <button class="search-clear" id="searchClear" style="display: none">
      âœ•
    </button>
    <button class="search-btn" id="searchBtn" type="button" aria-label="Search">
      ğŸ”
    </button>
  </div>

  <div class="search-filters">
    <select id="sortSelect" class="sort-select">
      <option value="newest">Newest First</option>
      <option value="oldest">Oldest First</option>
      <option value="category">By Category</option>
      <option value="alphabetical">Alphabetical</option>
    </select>

    <div class="view-toggle">
      <button class="view-btn active" data-view="grid">âŠ</button>
      <button class="view-btn" data-view="list">â˜°</button>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}

<!-- ================= HERO ================= -->
<section class="hero">
  <div class="hero-content">
    <h1>ğŸš€ DevOps Notes Manager</h1>
    <p>
      A personal knowledge base to store DevOps commands, configurations,
      and operational learnings.
    </p>

    <div class="hero-features">
      <div class="hero-feature">ğŸ“ Rich Text</div>
      <div class="hero-feature">ğŸ” Smart Search</div>
      <div class="hero-feature">ğŸ·ï¸ Tags & Categories</div>
      <div class="hero-feature">âš¡ Quick Access</div>
    </div>

    <a href="#add-note" class="hero-cta">Get Started</a>
  </div>
</section>

<!-- ================= DASHBOARD ================= -->
<section class="dashboard-stats">
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“š</div>
      <div>
        <h3>{{ total_notes }}</h3>
        <p>Total Notes</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div>
        <h3>{{ category_counts|length }}</h3>
        <p>Categories</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ·ï¸</div>
      <div>
        <h3>{{ popular_tags|length }}</h3>
        <p>Popular Tags</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">â­</div>
      <div>
        <h3>{{ recent_notes|length }}</h3>
        <p>Recent Notes</p>
      </div>
    </div>
  </div>
</section>

<!-- ================= ADD NOTE ================= -->
<section class="note-form-section" id="add-note">
  <div class="form-header">
    <h2>âœ¨ Add DevOps Note</h2>
  </div>

  <form method="POST" class="note-form">
    <input name="command" placeholder="Command (e.g. docker ps)" required />

    <select name="category">
      <option value="">Select Category</option>
      <option value="docker">ğŸ³ Docker</option>
      <option value="kubernetes">â˜¸ï¸ Kubernetes</option>
      <option value="linux">ğŸ§ Linux</option>
      <option value="cicd">ğŸ”„ CI/CD</option>
      <option value="aws">â˜ï¸ AWS</option>
      <option value="monitoring">ğŸ“Š Monitoring</option>
      <option value="other">ğŸ“¦ Other</option>
    </select>

    <div id="description-editor"></div>
    <input type="hidden" name="description" id="description-input" required />

    <input name="tags" placeholder="Tags (comma-separated)" />

    <button type="submit" class="btn primary">ğŸ’¾ Save Note</button>
  </form>
</section>

<!-- ================= NOTES ================= -->
<section class="features" id="notes-section">
  <div class="section-header">
    <h2>ğŸ“š Your Notes</h2>
    <div>{{ notes|length }} of {{ total_notes }} notes</div>
  </div>

  {% if notes %}
  <div class="feature-grid" id="notesGrid">
    {% for note in notes %}
    <div class="feature-card">
      <h3>{{ note.command }}</h3>
      <pre><code>{{ note.command }}</code></pre>
      <div class="description">{{ note.description|safe }}</div>

      {% if note.tags %}
      <div class="tags">
        {% for tag in note.tags.split(',') %}
        <span class="tag">{{ tag.strip() }}</span>
        {% endfor %}
      </div>
      {% endif %}

      <div class="note-actions">
        <button
          class="btn copy"
          onclick="copyToClipboard('{{ note.command }}', this)"
        >
          ğŸ“‹ Copy
        </button>
        <a href="/edit/{{ note.id }}" class="btn edit">âœï¸ Edit</a>
        <a
          href="/delete/{{ note.id }}"
          class="btn delete"
          onclick="return confirm('Delete this note?')"
        >
          ğŸ—‘ï¸ Delete
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty-state">
    <h3>No notes yet</h3>
    <a href="#add-note" class="btn primary">Add your first note</a>
  </div>
  {% endif %}
</section>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor.js') }}"></script>
{% endblock %}
