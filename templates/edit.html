{% extends "base.html" %}

{% block title %}
Edit Note | DevOps Notes Manager
{% endblock %}

{% block content %}

<section class="note-form-section">
  <h2>‚úèÔ∏è Edit DevOps Note</h2>

  <form method="post" class="note-form">
    <input
      name="command"
      value="{{ note.command }}"
      placeholder="Command or Concept"
      required
    />

    <select name="category" class="category-select">
      <option value="">Select Category</option>
      <option value="docker" {% if note.category == 'docker' %}selected{% endif %}>Docker</option>
      <option value="kubernetes" {% if note.category == 'kubernetes' %}selected{% endif %}>Kubernetes</option>
      <option value="linux" {% if note.category == 'linux' %}selected{% endif %}>Linux</option>
      <option value="cicd" {% if note.category == 'cicd' %}selected{% endif %}>CI/CD</option>
      <option value="aws" {% if note.category == 'aws' %}selected{% endif %}>AWS</option>
      <option value="monitoring" {% if note.category == 'monitoring' %}selected{% endif %}>Monitoring</option>
      <option value="other" {% if note.category == 'other' %}selected{% endif %}>Other</option>
    </select>

    <!-- Description Rich Text Editor -->
    <div class="editor-container">
      <label for="description-editor" class="editor-label">
        Description <span class="required">*</span>
      </label>
      <div id="description-editor"></div>
      <input type="hidden" id="description-input" name="description" value="{{ note.description or '' }}" required />
    </div>

    <!-- Example Rich Text Editor -->
    <div class="editor-container">
      <label for="example-editor" class="editor-label">
        Example (optional)
      </label>
      <div id="example-editor"></div>
      <input type="hidden" id="example-input" name="example" value="{{ note.example or '' }}" />
    </div>

    <input
      name="tags"
      value="{{ note.tags or '' }}"
      placeholder="Tags (comma-separated): networking, troubleshooting, performance"
    />

    <div style="display: flex; gap: 1rem">
      <button type="submit" class="btn primary">üíæ Save Changes</button>

      <a href="{{ url_for('main.home') }}" class="btn secondary">
        ‚ùå Cancel
      </a>
    </div>
  </form>
</section>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/editor.js') }}" defer></script>
{% endblock %}
